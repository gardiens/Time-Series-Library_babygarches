Pour des scripts rapides:
sbatch --gres=gpu:1 --time=1:00:00 --output=<path/to/out.stdout> --error=<path/to/err.stderr> --job-name=<job_name> <path/to/script.sh>
sbatch --gres=gpu:0 --time=1:00:00 --output=logs/1run/Auto/CPUout.stdout --error=logs/1run/Auto/CPUerr.stderr --job-name=AutoCPU scripts/1Run_FED_NTU/Autoformers_1run.sh

sbatch --gres=gpu:0 --time=1:00:00 --output=logs/1run/FED/CPUout.stdout --error=logs/1run/FED/CPUerr.stderr --job-name=FEDCPU scripts/1Run_FED_NTU/FEDformers_1run.sh


sbatch --gres=gpu:4 --time=20:00:00 --output=logs/1run/Auto/GPUout.stdout --error=logs/1run/Auto/GPUerr.stderr --job-name=AutoGF scripts/1Run_FED_NTU/Autoformers_1run.sh

sbatch --gres=gpu:4 --time=20:00:00 --output=logs/1run/FED/GPUout.stdout --error=logs/1run/FED/GPUerr.stderr --job-name=FEDGF scripts/1Run_FED_NTU/FEDformers_1run.sh

Pour Jupyter
srun --time=10:00:00 --gres=gpu:0 --pty bash
 http://localhost:8888


jupyter notebook --no-browser --port=8889 --ip=0.0.0.0
ssh -N -L localhost:8888:n3:8889 bournez@slurm-ext

pour pip
python3 -m pip install --proxy=http://webproxy.lab-ia.fr:8080 [EXTENSION]


tensorboard --logdir=runs --port=6006

 tensorboard --logdir=/mnt/beegfs/home/bournez/babygarches_rambaud/Time-Series-Library_babygarches/runs --port=7859


sbatch --gres=gpu:0 --time=1:00:00 --output=logs/training/Autoformer/CPUout.stdout --error=logs/training/Autoformer/CPUerr.stderr --job-name=AutoCPUtest scripts/training/Autoformer_train.sh


pour lancer les scripts finaux
sbatch scripts/training/lanceur_fed.sh

sbatch scripts/training/lanceur_Auto.sh

Tensorboard
ssh -L 16006:127.0.0.1:7859 bournez@slurm-ext

tensorboard --logdir=runs --host=localhost --port=7859
puis sur navigateur localhost:16006


git cmp pour commit et push!!!

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/mnt/beegfs/home/rambaud/babygarches_rambaud/miniconda3/envs/tslib_env/lib
Version python /mnt/beegfs/home/rambaud/babygarches_rambaud/miniconda3/envs/tslib_env/bin/python



 319987       all FEDforme  bournez  R    3:48:23      1 n102
 319988       all NTS_trai  bournez  R    3:48:23      1 n102
les deux utilisaient du CPU...

sbatch --gres=gpu:1 --time=20:00:00 --output=logs/training/NTS/GPUout.stdout --error=logs/training/NTS/GPUerr.stderr --job-name=NTS scripts/training/NTS_train.sh


bash scripts/utils/recup_logs.sh

scp bournez@slurm-ext:/mnt/beegfs/home/bournez/babygarches_rambaud/Time-Series-Library_babygarches/logs/training/NTS ./logs

git cmp pour tous envoyer !!


erreur :
RuntimeError: CUDA error: no kernel image is available for execution on the device
CUDA kernel errors might be asynchronously reported at some other API call,so the stacktrace below might be incorrect.
For debugging consider passing CUDA_LAUNCH_BLOCKING=1.

cuda version 11.2


le problème: pytorch n'est peut être pas installé avec la bonne version de CUDA ! Il faut donc la builde pour 11.2 exactement ...

320075 essai 20 heure


à rajouter après ::
MODEL_NAME=FEDformer
mkdir -p $PATH_LOG/${MODEL_NAME}
OUTPUT=${PATH_LOG}/${MODEL_NAME}/output_%j.out
ERROR=${PATH_LOG}/${MODEL_NAME}/error_%j.err

sbatch $PATH_SCRIPT/FEDformer_train.sh --partition=${PARTITION} --qos=${QOS} --mail-user=${MAIL} --mail-type=${MAIL_TYPE} --time=${TIME} --job-name=${JOB_NAME} --output=${OUTPUT} --error=${ERROR} --gres=gpu:1 
MODEL_NAME=NTS
mkdir -p $PATH_LOG/${MODEL_NAME}
OUTPUT=${PATH_LOG}/${MODEL_NAME}/output_%j.out
ERROR=${PATH_LOG}/${MODEL_NAME}/error_%j.err

sbatch $PATH_SCRIPT/NTS_train.sh --partition=${PARTITION} --qos=${QOS} --mail-user=${MAIL} --mail-type=${MAIL_TYPE} --time=${TIME} --job-name=${JOB_NAME} --output=${OUTPUT} --error=${ERROR} --gres=gpu:1


320096 Autformer et marche ?
320101 FEDFormer